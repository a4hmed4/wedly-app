# ๐ ูุธุงู ุงูุญุฌุฒ ุงููุชูุงูู - ุฏููู ุงูุงุณุชุฎุฏุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุญุฌุฒ ูุชูุงูู ูููุงุนุงุช ูุน ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ ูุชุถูู:

- โ ุญุฌุฒ ุงููุงุนุงุช ูุน ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ
- โ ุญุณุงุจ ุงููุจุงูุบ ุงูุฅุฌูุงููุฉ ุชููุงุฆูุงู
- โ ุชูุฒูุน ุงูุฃุฑุจุงุญ ุนูู ููุฏูู ุงูุฎุฏูุงุช
- โ ุฅูุดุงุก ููุงุชูุฑ ุฅุฌูุงููุฉ
- โ ุชูุงุฑูุฑ ุงูุฃุฑุจุงุญ ููููุฏููู
- โ ูุธุงู ุงูุชูุณูุท

## ๐๏ธ ุงูููุงุฐุฌ ุงูุฌุฏูุฏุฉ

### 1. ExtraService (ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ)
```python
# ูู services/models.py
class ExtraService(models.Model):
    provider = models.ForeignKey(User, on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    service_type = models.CharField(max_length=20, choices=SERVICE_TYPE_CHOICES)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    # ... ุงููุฒูุฏ ูู ุงูุญููู
```

### 2. Invoice (ุงููุงุชูุฑุฉ ุงูุฅุฌูุงููุฉ)
```python
# ูู halls/models.py
class Invoice(models.Model):
    booking = models.OneToOneField('Booking', on_delete=models.CASCADE)
    invoice_number = models.CharField(max_length=50, unique=True)
    total_amount = models.DecimalField(max_digits=10, decimal_places=2)
    final_amount = models.DecimalField(max_digits=10, decimal_places=2)
    # ... ุงููุฒูุฏ ูู ุงูุญููู
```

### 3. RevenueReport (ุชูุฑูุฑ ุงูุฃุฑุจุงุญ)
```python
# ูู halls/models.py
class RevenueReport(models.Model):
    provider = models.ForeignKey(User, on_delete=models.CASCADE)
    booking = models.ForeignKey('Booking', on_delete=models.CASCADE)
    service_name = models.CharField(max_length=150)
    amount = models.DecimalField(max_digits=10, decimal_places=2)
    commission_rate = models.DecimalField(max_digits=5, decimal_places=2)
    net_amount = models.DecimalField(max_digits=10, decimal_places=2)
    # ... ุงููุฒูุฏ ูู ุงูุญููู
```

## ๐ ุชุฏูู ุงูุญุฌุฒ

### 1. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููุงุนุฉ
```http
GET /api/halls/
```

### 2. ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ
```http
GET /api/extra-services/?service_type=PHOTOGRAPHY
```

### 3. ุฅูุดุงุก ุงูุญุฌุฒ
```http
POST /api/bookings/
{
    "hall": 1,
    "date": "2024-06-15",
    "start_time": "18:00",
    "end_time": "23:00",
    "total_guests": 150,
    "catering": 1,
    "extra_services": [1, 2, 3],
    "payment_method": 1,
    "installment_plan": 1
}
```

### 4. ุงููุธุงู ูุญุณุจ ุชููุงุฆูุงู:
- โ ุงููุจูุบ ุงูุฅุฌูุงูู ููุญุฌุฒ
- โ ุชูุฒูุน ุงูุฃุฑุจุงุญ ุนูู ููุฏูู ุงูุฎุฏูุงุช
- โ ุฅูุดุงุก ุงููุงุชูุฑุฉ ุงูุฅุฌูุงููุฉ
- โ ุชูุงุฑูุฑ ุงูุฃุฑุจุงุญ ููู ููุฏู ุฎุฏูุฉ

## ๐ API Endpoints ุงูุฌุฏูุฏุฉ

### ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ
```http
GET /api/extra-services/                    # ุฌููุน ุงูุฎุฏูุงุช
GET /api/extra-services/?service_type=PHOTOGRAPHY  # ุญุณุจ ุงูููุน
GET /api/extra-services/mine/               # ุฎุฏูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
POST /api/extra-services/                   # ุฅุถุงูุฉ ุฎุฏูุฉ ุฌุฏูุฏุฉ
```

### ุงูููุงุชูุฑ
```http
GET /api/invoices/                          # ุฌููุน ุงูููุงุชูุฑ
GET /api/invoices/mine/                     # ููุงุชูุฑ ุงููุณุชุฎุฏู ุงูุญุงูู
POST /api/invoices/{id}/mark_paid/          # ุชุญุฏูุฏ ุงููุงุชูุฑุฉ ูููุจูุถุฉ
```

### ุชูุงุฑูุฑ ุงูุฃุฑุจุงุญ
```http
GET /api/revenue-reports/                   # ุฌููุน ุงูุชูุงุฑูุฑ
GET /api/revenue-reports/mine/              # ุชูุงุฑูุฑ ุงููุณุชุฎุฏู ุงูุญุงูู
GET /api/revenue-reports/summary/           # ููุฎุต ุงูุฃุฑุจุงุญ
```

### ุชูุงุตูู ุงูุญุฌุฒ
```http
GET /api/booking-services/                 # ุชูุงุตูู ุงูุฎุฏูุงุช ูู ุงูุญุฌุฒ
GET /api/booking-services/mine/            # ุฃุฑุจุงุญ ุงููุณุชุฎุฏู ุงูุญุงูู
```

## ๐ฐ ูุธุงู ุชูุฒูุน ุงูุฃุฑุจุงุญ

### ูููุงูู (ุตุงุญุจ ุงููุงุนุฉ):
- ูุญุตู ุนูู 100% ูู ูุจูุบ ุงููุงุนุฉ
- ูุญุตู ุนูู 100% ูู ูุจูุบ ุงููุงุชุฑููุฌ
- ูุง ูุฏูุน ุนูููุฉ ููููุตุฉ

### ูููุฏูู ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ:
- ูุญุตู ุนูู 95% ูู ูุจูุบ ุงูุฎุฏูุฉ
- ุชุฏูุน ุงูููุตุฉ 5% ุนูููุฉ

### ูุซุงู ุนูู ุงูุชูุฒูุน:
```
ุญุฌุฒ ุจูููุฉ 10,000 ุฌููู:
โโโ ูุงุนุฉ: 5,000 ุฌููู (ูููุงูู)
โโโ ูุงุชุฑููุฌ: 2,000 ุฌููู (ูููุงูู)
โโโ ุชุตููุฑ: 2,000 ุฌููู (ูููุฏู ุงูุฎุฏูุฉ: 1,900 ุฌููู)
โโโ ุฏูููุฑ: 1,000 ุฌููู (ูููุฏู ุงูุฎุฏูุฉ: 950 ุฌููู)
```

## ๐ง ุฅุนุฏุงุฏ ุงููุธุงู

### 1. ุชุดุบูู Migrations
```bash
python manage.py makemigrations
python manage.py migrate
```

### 2. ุฅูุดุงุก ูุณุชุฎุฏููู ุชุฌุฑูุจููู
```python
# ูู Django shell
from accounts.models import User

# ูุงูู ูุงุนุฉ
owner = User.objects.create_user(
    username='hall_owner',
    email='owner@example.com',
    role='OWNER',
    business_type='HALL'
)

# ููุฏู ุฎุฏูุฉ ุชุตููุฑ
photographer = User.objects.create_user(
    username='photographer',
    email='photo@example.com',
    role='SERVICE',
    business_type='PHOTOGRAPHY'
)
```

### 3. ุฅุถุงูุฉ ุฎุฏูุงุช ุฅุถุงููุฉ
```python
# ูู Django shell
from services.models import ExtraService

ExtraService.objects.create(
    provider=photographer,
    name='ุญุฒูุฉ ุชุตููุฑ ูุงููุฉ',
    service_type='PHOTOGRAPHY',
    price=2000.00,
    description='ุชุตููุฑ ูุงูู ููุฒูุงู'
)
```

## ๐ฑ ุงุณุชุฎุฏุงู ุงููุธุงู

### 1. ูููุณุชุฎุฏู ุงูุนุงุฏู:
1. ุชุตูุญ ุงููุงุนุงุช ุงููุชุงุญุฉ
2. ุงุฎุชุฑ ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ ุงููุทููุจุฉ
3. ุฃููู ุจูุงูุงุช ุงูุญุฌุฒ
4. ุงุญุตู ุนูู ุงููุงุชูุฑุฉ ุงูุฅุฌูุงููุฉ

### 2. ูููุฏูู ุงูุฎุฏูุงุช:
1. ุณุฌู ุญุณุงุจ ูููุฏู ุฎุฏูุฉ
2. ุฃุถู ุฎุฏูุงุชู ูุน ุงูุฃุณุนุงุฑ
3. ุชุงุจุน ุทูุจุงุช ุงูุญุฌุฒ
4. ุงุญุตู ุนูู ุชูุงุฑูุฑ ุงูุฃุฑุจุงุญ

### 3. ูุฃุตุญุงุจ ุงููุงุนุงุช:
1. ุฃุถู ูุงุนุงุชู ูุน ุงูุฃุณุนุงุฑ
2. ุชุงุจุน ุงูุญุฌูุฒุงุช
3. ุงุญุตู ุนูู ุงูุฃุฑุจุงุญ ูู ุงููุงุนุงุช ูุงููุงุชุฑููุฌ

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

- โ **ุญุณุงุจ ุชููุงุฆู ูููุจุงูุบ**: ุงููุธุงู ูุญุณุจ ุงููุจูุบ ุงูุฅุฌูุงูู ุชููุงุฆูุงู
- โ **ุชูุฒูุน ุนุงุฏู ููุฃุฑุจุงุญ**: ูู ููุฏู ุฎุฏูุฉ ูุญุตู ุนูู ูุตูุจู
- โ **ููุงุชูุฑ ููุตูุฉ**: ูุงุชูุฑุฉ ุฅุฌูุงููุฉ ูุน ุชูุงุตูู ูู ุฎุฏูุฉ
- โ **ุชูุงุฑูุฑ ุดุงููุฉ**: ุชูุงุฑูุฑ ุงูุฃุฑุจุงุญ ููู ููุฏู ุฎุฏูุฉ
- โ **ูุธุงู ุชูุณูุท**: ุฏุนู ุฎุทุท ุงูุชูุณูุท ุงููุฎุชููุฉ
- โ **ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ**: ุฅููููุงุช ุชุฃููุฏ ููุญุฌุฒ

## ๐ ูุซุงู ุนููู

```json
{
  "booking": {
    "id": 1,
    "hall": "ูุงุนุฉ ุงูุฃูุฑุงุญ ุงููุจุฑู",
    "date": "2024-06-15",
    "total_price": 10000.00,
    "services": [
      {
        "name": "ุชุตููุฑ ูุงูู",
        "provider": "ูุตูุฑ ูุญุชุฑู",
        "amount": 2000.00
      },
      {
        "name": "ุฏูููุฑ ูุงุฎุฑ",
        "provider": "ูุตูู ุฏูููุฑ",
        "amount": 1500.00
      }
    ]
  },
  "invoice": {
    "invoice_number": "INV-ABC12345",
    "total_amount": 10000.00,
    "final_amount": 10000.00
  },
  "revenue_distribution": [
    {
      "provider": "ูุงูู ุงููุงุนุฉ",
      "service": "ูุงุนุฉ ุงูุฃูุฑุงุญ ุงููุจุฑู",
      "amount": 6500.00
    },
    {
      "provider": "ูุตูุฑ ูุญุชุฑู",
      "service": "ุชุตููุฑ ูุงูู",
      "amount": 1900.00
    },
    {
      "provider": "ูุตูู ุฏูููุฑ",
      "service": "ุฏูููุฑ ูุงุฎุฑ",
      "amount": 1425.00
    }
  ]
}
```

ูุฐุง ุงููุธุงู ูููุฑ ุญูุงู ูุชูุงููุงู ูุฅุฏุงุฑุฉ ุญุฌูุฒุงุช ุงููุงุนุงุช ูุน ุงูุฎุฏูุงุช ุงูุฅุถุงููุฉ ูุชูุฒูุน ุงูุฃุฑุจุงุญ ุจุดูู ุนุงุฏู ูููุธู! ๐
